<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset='utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1'>
	<style>
    @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap');

		* {
			box-sizing: border-box;
		}

		body {
			margin: 0;
			padding: 0;
			background-color: lightgrey;
	    font-family: 'Open Sans', sans-serif;
		}

		main {
			margin: 0 auto;
			padding: 20px;
			width: calc(100% - 20px);
			max-width: 800px;
			background-color: white;
		}

		h1 {
			margin: 10px 0;
		}
	</style>
</head>

<body>
	<main>
		<h1>iFrame test</h1>
    <button id="set-cookies" style="display: none; margin-bottom: 10px;">Enable cookies</button>
		<div id="game"><iframe id="iframe" src="./" width="100%" scrolling="no" marginheight="0" frameborder="0" height="600px"></iframe></div>
	</main>
  <script>      
    // Set site cookie with 'all' or 'essential' cookies
    function setCookie(option) {
      let oneYearInSeconds = 60 * 60 * 24 * 365;
      let cookiesDomain = window.location.hostname;
      let cookiesPreference = !0;
      let encodedCookiesPolicy = `%7B%22essential%22%3Atrue%2C%22usage%22%3A${option == "all" ? "true" : "false"}%7D`;
      let cookiesPath = "/";

      document.cookie = `cookies_preferences_set=${cookiesPreference};max-age=${oneYearInSeconds};domain=${cookiesDomain};path=${cookiesPath};`;
      document.cookie = `cookies_policy=${encodedCookiesPolicy};max-age=${oneYearInSeconds};domain=${cookiesDomain};path=${cookiesPath};`;
      document.getElementById("set-cookies").style.display = "none";
    }
    function hasCookiesPreferencesSet() {
      return -1 < document.cookie.indexOf("cookies_preferences_set=true");
    }
    document.getElementById("set-cookies").onclick = () => setCookie("all");
    if (!hasCookiesPreferencesSet()) {
      document.getElementById("set-cookies").style.display = "block";
    }
    let url = `https://www.ons.gov.uk/peoplepopulationandcommunity/populationandmigration/populationestimates/articles/playthecensus2021quizhowwelldoyouknowyourarea/2022-12-02/${window.location.hash}`;
    document.getElementById("iframe").src = `./?initialWidth=760&childId=game&parentTitle=&parentUrl=${encodeURIComponent(url)}`;
  </script>
</body>

</html>